<!doctype html>
<html lang="en-AU">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" type="image/png" sizes="32x32" href="/docs/comet.png"><title>Unit testing (Pest) | Comet Components</title><meta name="description" content="A front-end user interface library for PHP-driven websites">
    <link rel="preload" href="/docs/assets/style-DyesZTav.css" as="style"><link rel="stylesheet" href="/docs/assets/style-DyesZTav.css">
    <link rel="modulepreload" href="/docs/assets/app-BzyXD7Rl.js"><link rel="modulepreload" href="/docs/assets/unit-testing.html-DxERWvt5.js"><link rel="modulepreload" href="/docs/assets/phpstorm-coverage-window-Bt5qCLDv.js">
    <link rel="prefetch" href="/docs/assets/index.html-BeKNX-Kr.js" as="script"><link rel="prefetch" href="/docs/assets/intro.html-Bjq2YRWB.js" as="script"><link rel="prefetch" href="/docs/assets/troubleshooting.html-BPtoEPwv.js" as="script"><link rel="prefetch" href="/docs/assets/background.html-Ds41zA-t.js" as="script"><link rel="prefetch" href="/docs/assets/changelog.html-u2sFqFcK.js" as="script"><link rel="prefetch" href="/docs/assets/contributing.html-CbPNuIKv.js" as="script"><link rel="prefetch" href="/docs/assets/cli-commands.html-BPDTq6W_.js" as="script"><link rel="prefetch" href="/docs/assets/new-component.html-DP4S2zXX.js" as="script"><link rel="prefetch" href="/docs/assets/overview.html-DzAidoYT.js" as="script"><link rel="prefetch" href="/docs/assets/setup.html-C2O3dPtP.js" as="script"><link rel="prefetch" href="/docs/assets/composer.html-BpwhBt5X.js" as="script"><link rel="prefetch" href="/docs/assets/wordpress.html-CMzjoY8n.js" as="script"><link rel="prefetch" href="/docs/assets/overview.html-BC0aBZSX.js" as="script"><link rel="prefetch" href="/docs/assets/setup.html-Bgbxwll8.js" as="script"><link rel="prefetch" href="/docs/assets/html-css-sass.html-cCDbZ_CE.js" as="script"><link rel="prefetch" href="/docs/assets/extending.html-B-FgRXLo.js" as="script"><link rel="prefetch" href="/docs/assets/overview.html-DQonY_i3.js" as="script"><link rel="prefetch" href="/docs/assets/theming.html-D2GMBoAW.js" as="script"><link rel="prefetch" href="/docs/assets/wordpress.html-BTdxW1E-.js" as="script"><link rel="prefetch" href="/docs/assets/browser.html-BvTFG5PA.js" as="script"><link rel="prefetch" href="/docs/assets/integration-testing.html-CgLhvOvr.js" as="script"><link rel="prefetch" href="/docs/assets/overview.html-CjR_kLkc.js" as="script"><link rel="prefetch" href="/docs/assets/storybook.html-WmaNCWk1.js" as="script"><link rel="prefetch" href="/docs/assets/node.html-DLpqxxJF.js" as="script"><link rel="prefetch" href="/docs/assets/php.html-DKvMqiRm.js" as="script"><link rel="prefetch" href="/docs/assets/phpstorm.html-BQeEAyU0.js" as="script"><link rel="prefetch" href="/docs/assets/sass.html-D2P-EkTd.js" as="script"><link rel="prefetch" href="/docs/assets/wsl.html-CXWcgdUk.js" as="script"><link rel="prefetch" href="/docs/assets/javascript.html-B2iUQ8qN.js" as="script"><link rel="prefetch" href="/docs/assets/overview.html-QiqVgd3S.js" as="script"><link rel="prefetch" href="/docs/assets/vue.html-DcMigmNB.js" as="script"><link rel="prefetch" href="/docs/assets/abstract-classes.html--r7wmlEN.js" as="script"><link rel="prefetch" href="/docs/assets/data-types.html-HpkLemPX.js" as="script"><link rel="prefetch" href="/docs/assets/overview.html-fCOVlNnG.js" as="script"><link rel="prefetch" href="/docs/assets/traits.html-iY_Y-xvD.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-DvOprmYu.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="announcement-banner" data-v-dbb7d141><!----><div class="announcement-banner__info" data-v-dbb7d141><p data-v-dbb7d141><strong data-v-dbb7d141>Comet Components is an active work in progress.</strong> These docs and the code currently available via GitHub and Packagist should be considered an incomplete alpha release.</p></div></div><!----><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/docs/"><img class="vp-site-logo" src="/docs/comet.png" alt="Comet Components"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Comet Components</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/intro.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/installation/wordpress.html" aria-label="Installation"><!--[--><!--[--><!--]--><!--]-->Installation<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/usage/overview.html" aria-label="Usage"><!--[--><!--[--><!--]--><!--]-->Usage<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/development-core/overview.html" aria-label="Development"><!--[--><!--[--><!--]--><!--]-->Development<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/doubleedesign/comet-components" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/intro.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/installation/wordpress.html" aria-label="Installation"><!--[--><!--[--><!--]--><!--]-->Installation<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/usage/overview.html" aria-label="Usage"><!--[--><!--[--><!--]--><!--]-->Usage<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/development-core/overview.html" aria-label="Development"><!--[--><!--[--><!--]--><!--]-->Development<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/doubleedesign/comet-components" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/docs/intro.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Installation <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/installation/composer.html" aria-label="Composer"><!--[--><!--[--><!--]--><!--]-->Composer<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/installation/wordpress.html" aria-label="WordPress - Block Editor"><!--[--><!--[--><!--]--><!--]-->WordPress - Block Editor<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Usage <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/usage/overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/usage/theming.html" aria-label="Theming"><!--[--><!--[--><!--]--><!--]-->Theming<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/usage/extending.html" aria-label="Extending"><!--[--><!--[--><!--]--><!--]-->Extending<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/usage/wordpress.html" aria-label="Using in WordPress"><!--[--><!--[--><!--]--><!--]-->Using in WordPress<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">Development (Core) <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/setup.html" aria-label="Local dev setup"><!--[--><!--[--><!--]--><!--]-->Local dev setup<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/new-component.html" aria-label="Creating a new component"><!--[--><!--[--><!--]--><!--]-->Creating a new component<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/cli-commands.html" aria-label="CLI command quick reference"><!--[--><!--[--><!--]--><!--]-->CLI command quick reference<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">Testing <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/testing/overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/docs/development-core/testing/unit-testing.html" aria-label="Unit testing (Pest)"><!--[--><!--[--><!--]--><!--]-->Unit testing (Pest)<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/testing/browser.html" aria-label="Browser testing"><!--[--><!--[--><!--]--><!--]-->Browser testing<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/testing/storybook.html" aria-label="Storybook"><!--[--><!--[--><!--]--><!--]-->Storybook<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-core/testing/integration-testing.html" aria-label="Integration testing (Playwright)"><!--[--><!--[--><!--]--><!--]-->Integration testing (Playwright)<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Technical Deep Dives <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/html-css-sass.html" aria-label="HTML, CSS, and SCSS"><!--[--><!--[--><!--]--><!--]-->HTML, CSS, and SCSS<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item collapsible">JS Architecture <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/js-architecture/overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/js-architecture/javascript.html" aria-label="Basic - Vanilla JavaScript"><!--[--><!--[--><!--]--><!--]-->Basic - Vanilla JavaScript<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/js-architecture/vue.html" aria-label="Advanced - Vue.js"><!--[--><!--[--><!--]--><!--]-->Advanced - Vue.js<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">PHP Architecture <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/php-architecture/overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/php-architecture/abstract-classes.html" aria-label="Abstract classes"><!--[--><!--[--><!--]--><!--]-->Abstract classes<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/php-architecture/traits.html" aria-label="Component traits"><!--[--><!--[--><!--]--><!--]-->Component traits<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/technical-deep-dives/php-architecture/data-types.html" aria-label="Data types"><!--[--><!--[--><!--]--><!--]-->Data types<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">New Implementations <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/development-new/overview.html" aria-label="Overview"><!--[--><!--[--><!--]--><!--]-->Overview<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Local Dev Deep Dives <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/local-dev-deep-dives/setup.html" aria-label="Detailed options for local dev"><!--[--><!--[--><!--]--><!--]-->Detailed options for local dev<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Tooling Guides <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/local-dev-deep-dives/tooling-guides/wsl.html" aria-label="Bash/ZSH on Windows with WSL"><!--[--><!--[--><!--]--><!--]-->Bash/ZSH on Windows with WSL<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/local-dev-deep-dives/tooling-guides/node.html" aria-label="Node on Windows"><!--[--><!--[--><!--]--><!--]-->Node on Windows<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/local-dev-deep-dives/tooling-guides/php.html" aria-label="PHP on Windows"><!--[--><!--[--><!--]--><!--]-->PHP on Windows<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/local-dev-deep-dives/tooling-guides/phpstorm.html" aria-label="PhpStorm"><!--[--><!--[--><!--]--><!--]-->PhpStorm<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/local-dev-deep-dives/tooling-guides/sass.html" aria-label="Sass"><!--[--><!--[--><!--]--><!--]-->Sass<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/docs/troubleshooting.html" aria-label="Troubleshooting"><!--[--><!--[--><!--]--><!--]-->Troubleshooting<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading collapsible" href="/docs/about/changelog.html" aria-label="About"><!--[--><!--[--><!--]--><!--]-->About<!--[--><!--[--><span class="arrow right"></span><!--]--><!--]--></a><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/about/background.html" aria-label="Background"><!--[--><!--[--><!--]--><!--]-->Background<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/about/contributing.html" aria-label="Contributing"><!--[--><!--[--><!--]--><!--]-->Contributing<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/about/changelog.html" aria-label="Releases"><!--[--><!--[--><!--]--><!--]-->Releases<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="unit-testing" tabindex="-1"><a class="header-anchor" href="#unit-testing"><span>Unit testing</span></a></h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#about-the-setup" class="router-link-active router-link-exact-active">About the setup</a></li><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#writing-tests" class="router-link-active router-link-exact-active">Writing tests</a><ul><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#naming-conventions" class="router-link-active router-link-exact-active">Naming conventions</a></li><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#boilerplate-for-a-new-test-file" class="router-link-active router-link-exact-active">Boilerplate for a new test file</a></li><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#identifying-dom-elements-using-domdocument" class="router-link-active router-link-exact-active">Identifying DOM elements using DOMDocument</a></li></ul></li><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#running-tests" class="router-link-active router-link-exact-active">Running tests</a></li><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#coverage-reporting" class="router-link-active router-link-exact-active">Coverage reporting</a></li><li><a aria-current="page" href="/docs/development-core/testing/unit-testing.html#troubleshooting" class="router-link-active router-link-exact-active">Troubleshooting</a></li></ul></nav><h2 id="about-the-setup" tabindex="-1"><a class="header-anchor" href="#about-the-setup"><span>About the setup</span></a></h2><p>The unit tests are set up to use <a href="https://pestphp.com/" target="_blank" rel="noopener noreferrer">Pest</a>, with the following utility add-on libraries:</p><ul><li><a href="https://patchwork2.org/" target="_blank" rel="noopener noreferrer">Patchwork</a> for convenient mocking functions that support class methods</li><li><a href="https://github.com/Haberkamp/phluent" target="_blank" rel="noopener noreferrer">Phluent</a> for convenient plain-English assertion syntax.</li></ul><p>Pest uses <a href="https://phpunit.de/index.html" target="_blank" rel="noopener noreferrer">PHPUnit</a> under the hood, but provides a syntax similar to JavaScript test runners such as Jest and Playwright.</p><p>Some custom utility functions are included in the <code>PestUtils</code> class, which can be found in <code>./test/unit/PestUtils.php</code> and used in tests by importing the class at the top of your test file:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">Doubleedesign<span class="token punctuation">\</span>Comet<span class="token punctuation">\</span>TestUtils<span class="token punctuation">\</span>PestUtils</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">Important</p><p>If adding additional utility libraries for unit testing, they should go in the dev dependencies in the project root&#39;s <code>composer.json</code> file. All testing configuration should go in the root in the first instance, so it can be shared amongst packages while also helping to keep them lean for distribution.</p><p>If adding any testing utilities of your own that are relevant only to a specific package, ensure they are excluded from distribution in that package&#39;s <code>composer.json</code> under <code>archive &gt; exclude</code>. See the <code>core</code> package&#39;s <code>composer.json</code> for an example.</p></div><h2 id="writing-tests" tabindex="-1"><a class="header-anchor" href="#writing-tests"><span>Writing tests</span></a></h2><h3 id="naming-conventions" tabindex="-1"><a class="header-anchor" href="#naming-conventions"><span>Naming conventions</span></a></h3><ul><li>Test classes and files should be in PascalCase with the word <code>Test</code> appended to the class name. e.g., tests for <code>Container</code> are in <code>ContainerTest.php</code>.</li></ul><h3 id="boilerplate-for-a-new-test-file" tabindex="-1"><a class="header-anchor" href="#boilerplate-for-a-new-test-file"><span>Boilerplate for a new test file</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Doubleedesign<span class="token punctuation">\</span>Comet<span class="token punctuation">\</span>Core</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;some test case description&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">ob_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$component</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourComponent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$component</span><span class="token operator">-&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$output</span> <span class="token operator">=</span> <span class="token function">ob_get_clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token variable">$dom</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    @<span class="token variable">$dom</span><span class="token operator">-&gt;</span><span class="token function">loadHTML</span><span class="token punctuation">(</span><span class="token variable">$output</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token variable">$component</span> <span class="token operator">=</span> <span class="token variable">$dom</span><span class="token operator">-&gt;</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// assertions</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="identifying-dom-elements-using-domdocument" tabindex="-1"><a class="header-anchor" href="#identifying-dom-elements-using-domdocument"><span>Identifying DOM elements using DOMDocument</span></a></h3><p>You can render a component within a test, capturing its HTML using <a href="https://www.php.net/manual/en/outcontrol.output-buffering.php" target="_blank" rel="noopener noreferrer">output buffering</a>:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token function">ob_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$component</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourComponent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$component</span><span class="token operator">-&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$output</span> <span class="token operator">=</span> <span class="token function">ob_get_clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, you can use the <a href="https://www.php.net/manual/en/class.domdocument.php" target="_blank" rel="noopener noreferrer">DOMDocument</a> class to parse the HTML and find elements. For example:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token variable">$dom</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">@<span class="token variable">$dom</span><span class="token operator">-&gt;</span><span class="token function">loadHTML</span><span class="token punctuation">(</span><span class="token variable">$output</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$wrapper</span> <span class="token operator">=</span> <span class="token variable">$dom</span><span class="token operator">-&gt;</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In this example, <code>$wrapper</code> will be a <a href="https://www.php.net/manual/en/class.domelement.php" target="_blank" rel="noopener noreferrer">DOMElement</a> object representing the first <code>&lt;div&gt;</code> in the rendered HTML.</p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p><code>$dom-&gt;getElementsByTagName()</code> ignores hierarchy. This means that, for example, if you want to get the first two inner divs of a component but they have their own inner divs, <code>dom-&gt;getElementsByTagName(&#39;div&#39;)-&gt;item(1)</code> will give you the first child&#39;s own first child, not the second child of your component.</p><p>A utility function, <code>PestUtils::getElementsByClassName()</code>, is available to get elements by their class name instead of just their tag name.</p></div><h2 id="running-tests" tabindex="-1"><a class="header-anchor" href="#running-tests"><span>Running tests</span></a></h2><p>To run a test file from the terminal:</p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>// TODO: Updated instructions to come</p></div><p>To run all tests in a file in PhpStorm:</p><ul><li>Right-click the test file&#39;s tab in the editor or its name in the Project tool window and select <code>Run FileName.test (Pest)</code>. This will use the included Run configuration template unless you configure a custom one.</li></ul><p>To run a single test from the gutter icon in PhpStorm:</p><ul><li>⚠️ // TODO: This is not currently supported because the automatic filtering of the test name is not working. Run the whole file instead as a workaround.</li></ul><p>To run all unit tests in PhpStorm:</p><ul><li>A Run configuration has been included for running all tests.</li></ul><h2 id="coverage-reporting" tabindex="-1"><a class="header-anchor" href="#coverage-reporting"><span>Coverage reporting</span></a></h2><p>You will need <a href="https://xdebug.org/" target="_blank" rel="noopener noreferrer">Xdebug</a> installed and enabled to generate coverage data and reports. See the <a class="route-link" href="/docs/development-core/tooling/php.html">PHP setup notes</a> for more information.</p><p>A PhpStorm Run Configuration has been included in this repository for running all tests in the core package and generating a HTML coverage report. To see coverage data using the IDE coverage tools, use the &quot;Run with coverage&quot; option. By default, this is located in the top right corner of the PhpStorm window (shown below); you can also find it in the Run menu.</p><p><img src="/docs/phpstorm-run-with-coverage.png" alt="Run with coverage screenshot">]</p><h2 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting"><span>Troubleshooting</span></a></h2><details class="hint-container details"><summary>Logging to the console</summary><p><code>print_r</code> and <code>var_dump</code> may not work in unit tests. Instead, you can use:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token constant">STDERR</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;something to output as an error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token constant">STDOUT</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;something to output as a basic message&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Even better, if you are using Laravel Herd you can send output to the Herd Dumps window which is much more powerful, allowing you to directly log entire objects and arrays:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code><span class="line"><span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Symfony<span class="token punctuation">\</span>Component<span class="token punctuation">\</span>VarDumper<span class="token punctuation">\</span>VarDumper</span><span class="token operator">::</span><span class="token function">dump</span><span class="token punctuation">(</span><span class="token variable">$variable</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>PhpStorm not detecting Xdebug when using Laravel Herd</summary><p>If you are trying to use Xdebug for unit test code coverage and nothing has triggered Herd&#39;s automatic Xdebug detection, you can enable it manually:</p><ol><li>Ensure the PHP version the default interpreter in PhpStorm (found in <code>Settings &gt; PHP</code>)is set to is the same as the one currently set as the global version in Herd. In the Herd dashboard, under <code>Active Services</code> it should also say that version is active with debugging - e.g., <code>PHP 8.4 (debug)</code></li><li>Back in PhpStorm &gt; <code>Settings &gt; PHP &gt; CLI Interpreter</code>, click the 3 dot button to go into the interpreter details and click the <code>Reload PHPInfo</code> button</li><li>If it&#39;s still not picking up Xdebug, try putting the path to the extension in the <code>Additional</code> section. This will be something like <code>C:\Users\YOUR_USERNAME\.config\herd\bin\xdebug\xdebug-8.4.dll</code>. Click the reload button again, and it should pick it up if you have the file path correct.</li><li>In <code>Settings &gt; PHP &gt; PHP Runtime tab</code> and click &quot;sync extensions with interpreter&quot;.</li></ol><p>Below is an example of the CLI interpreter settings using this method:</p><p><img src="/docs/phpstorm-xdebug-fix.png" alt="PhpStorm CLI interpreter settings with Xdebug manually enabled"></p><p>Try running the unit tests with coverage again. If using the PhpStorm run configuration for Pest, select &quot;Run [test config] with coverage&quot; as shown below:</p><p><img src="/docs/phpstorm-run-with-coverage.png" alt="Pest run with coverage"></p><p>If it works, the <code>Coverage</code> tool window should populate when the tests have finished (and coverage data should be shown in the Project tool window and in the files themselves until you close the active suite in the Coverage tool window).</p><p>Below is an example of the test run output and the coverage tool window.</p><p>[<img src="/docs/phpstorm-coverage-window.png" alt="PhpStorm test run output and coverage"></p></details></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/doubleedesign/comet-components/edit/main/development-core/testing/unit-testing.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated:: </span><time class="meta-item-info" datetime="2025-04-05T06:28:19.000Z" data-allow-mismatch>5/4/25, 5:28 pm</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: leesa@doubleedesign.com.au">Leesa Ward</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/docs/development-core/testing/overview.html" aria-label="Overview"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Overview</span></div><!--]--></a><a class="route-link auto-link next" href="/docs/development-core/testing/browser.html" aria-label="Browser testing"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Browser testing</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/docs/assets/app-BzyXD7Rl.js" defer></script>
  </body>
</html>
